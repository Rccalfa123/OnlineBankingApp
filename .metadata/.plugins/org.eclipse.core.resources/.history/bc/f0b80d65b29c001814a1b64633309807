package com.cg.alfabankapp.controller;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.cg.alfabankapp.factory.MMBankFactory;


@WebServlet("*.app")
public class Bankcontroller extends HttpServlet {
	private static final long serialVersionUID = 1L;

	protected void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		
		Map<String, Object> account= new HashMap();
		
		MMBankFactory mmBankFactory = new MMBankFactory();

		String name = request.getServletPath();
		System.out.println(name);

		switch (name) {
		case "/addNewAccount.app":
			account.put("customerName", request.getParameter("customerName")) ;
			account.put("gender", request.getParameter("gender")) ;
			account.put("email",request.getParameter("email")) ;
			account.put("dob", request.getParameter("dob"));
			account.put("contact_no", request.getParameter("fname")) ;
			account.put("address", request.getParameter("fname")) ;
			account.put("isSalaried", request.getParameter("fname")) ;
			account.put("savSalBalance", request.getParameter("fname")) ;
			account.put("sacNotSalBalance", request.getParameter("fname")) ;
			account.put("curBalance", request.getParameter("fname")) ;
			account.put("od_Limit", request.getParameter("fname")) ;

			long contact_no =Long.parseLong(request.getParameter("contact_no"));
			String address = request.getParameter("address");
			String accountType = request.getParameter("accountType");
			String isSalaried = request.getParameter("salaried");
			Double savSalBalance = Double.parseDouble(request.getParameter("savSalBalance"));
			Double savNotSalBalance = Double.parseDouble(request.getParameter("savNotSalBalance"));
			Double curBalance = Double.parseDouble(request.getParameter("curBalance"));
			Double od_Limit = Double.parseDouble(request.getParameter("overDraft"));
			
			
			
			
			
			//int counter = servicelayer.getCounter();
			//System.out.println(counter);
			//double price = servicelayer.getPrice();
			//System.out.println(price);
			//response.sendRedirect("showCart.app");
			
			break;

		case "/removenew.app":
//			servicelayer.removeBookFromCart(Integer.parseInt(request.getParameter("bookId")));
//			counter = servicelayer.getCounter();
//			System.out.println(counter);
//			price = servicelayer.getPrice();
//			System.out.println(price);
//			HttpSession session = request.getSession();
//			session.setAttribute("booksInCart", servicelayer.ViewCart());
//			session.setAttribute("counter", servicelayer.getCounter());
//			session.setAttribute("price", servicelayer.getPrice());
//			response.sendRedirect("Cart.jsp");
			
			break;
	
			
		case "/showCart.app":

//		    session = request.getSession();
//			session.setAttribute("booksInCart", servicelayer.ViewCart());
//			session.setAttribute("counter", servicelayer.getCounter());
//			session.setAttribute("price", servicelayer.getPrice());
//			response.sendRedirect("index.jsp");
//
//			break;
//
		case "/showBook.app":

//			session = request.getSession();
//			session.setAttribute("availableBooks", servicelayer.ViewBook());
//			response.sendRedirect("home.jsp");
//
	   case "/dropdownchange.app":
		     
		   String AccountType = request.getParameter("accountType");
		   System.out.println(AccountType);
		   HttpSession session = request.getSession();
		   session.setAttribute("accountType", AccountType);
			break;

		default:
			break;
		}

	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		doGet(request, response);
	}

}
